(function(){"use strict";var e={7889:function(e,t,s){var r=s(5130),o=s(6768);const n={id:"app"};function i(e,t,s,r,i,a){const l=(0,o.g2)("UserRegistration"),c=(0,o.g2)("MoodEntry");return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.bF)(l),(0,o.bF)(c)])}var a=s(4232);const l={class:"container"},c=["type"],d={key:0,class:"error"},u=["disabled"],h={key:0,class:"error"};function p(e,t,s,n,i,p){return(0,o.uX)(),(0,o.CE)("div",l,[t[7]||(t[7]=(0,o.Lk)("h1",null,"Регистрация",-1)),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>p.registerUser&&p.registerUser(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("label",{for:"username"},"Имя пользователя:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),required:""},null,512),[[r.Jo,i.username]])]),(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"password"},"Пароль:",-1)),(0,o.bo)((0,o.Lk)("input",{type:i.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>i.password=e),onInput:t[2]||(t[2]=(...e)=>p.checkPassword&&p.checkPassword(...e)),required:""},null,40,c),[[r.hp,i.password]]),(0,o.Lk)("button",{type:"button",onClick:t[3]||(t[3]=(...e)=>p.togglePasswordVisibility&&p.togglePasswordVisibility(...e))},(0,a.v_)(i.showPassword?"Скрыть":"Показать"),1),i.passwordError?((0,o.uX)(),(0,o.CE)("p",d,"Пароль должен содержать минимум 8 символов.")):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{type:"submit",disabled:i.passwordError},"Зарегистрироваться",8,u)],32),i.errorMessage?((0,o.uX)(),(0,o.CE)("p",h,(0,a.v_)(i.errorMessage),1)):(0,o.Q3)("",!0)])}var m=s(4373);const v=m.A.create({baseURL:"http://your-api-url.com/api",timeout:1e4});var g=v,f={name:"User  RegistrationForm",data(){return{username:"",password:"",errorMessage:"",passwordError:!1,showPassword:!1}},methods:{togglePasswordVisibility(){this.showPassword=!this.showPassword},validatePassword(e){return e.length>=8},checkPassword(){this.passwordError=!this.validatePassword(this.password)},async registerUser(){if(this.passwordError)this.errorMessage="Исправьте ошибки перед отправкой формы.";else{this.errorMessage="",console.log("Отправка данных на сервер:",{username:this.username,password:this.password});try{const e=await g.post("/register",{username:this.username,password:this.password});console.log("Ответ от сервера:",e),201===e.status?(this.errorMessage="Регистрация успешна! Теперь вы можете войти.",this.resetForm()):this.errorMessage=e.data.message||"Произошла ошибка. Попробуйте еще раз."}catch(e){console.error("Ошибка при регистрации:",e),this.handleError(e)}}},handleError(e){e.response?e.response.data&&e.response.data.message?this.errorMessage=e.response.data.message:this.errorMessage="Произошла ошибка на сервере. Попробуйте еще раз.":e.request?this.errorMessage="Нет ответа от сервера. Проверьте подключение к интернету.":this.errorMessage="Ошибка: "+e.message},resetForm(){this.username="",this.password="",this.errorMessage="",this.passwordError=!1}}},y=s(1241);const E=(0,y.A)(f,[["render",p],["__scopeId","data-v-402f3018"]]);var k=E;const w={class:"mood-entry-container"},b={class:"mood-entry"},L={class:"emotions"},C={class:"emotion-options"},_=["value"],M={class:"emotion-text"},P={class:"description"},S={key:0,class:"recommendations"},T={class:"saved-entries"},O={class:"entry-list"},X={class:"entry-date"},x={class:"entry-content"},F={class:"entry-description"},U={class:"entry-emotions"},j={class:"emotion-list"},A=["onClick"],I=["onClick"];function V(e,t,s,n,i,l){return(0,o.uX)(),(0,o.CE)("div",w,[(0,o.Lk)("div",b,[(0,o.Lk)("h2",null,(0,a.v_)(i.isEditing?"Редактировать запись о настроении":"Добавить запись о настроении"),1),(0,o.Lk)("div",L,[t[3]||(t[3]=(0,o.Lk)("h3",null,"Выберите эмоцию:",-1)),(0,o.Lk)("div",C,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.emotions,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e,class:"emotion-label"},[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>i.selectedEmotions=e),class:"emotion-checkbox"},null,8,_),[[r.lH,i.selectedEmotions]]),(0,o.Lk)("span",M,(0,a.v_)(e),1)])))),128))])]),(0,o.Lk)("div",P,[t[4]||(t[4]=(0,o.Lk)("h3",null,"Опишите свой день:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.description=e),rows:"4",placeholder:"Опишите свой день:",required:""},null,512),[[r.Jo,i.description]])]),(0,o.Lk)("button",{class:"save-button",onClick:t[2]||(t[2]=(...e)=>l.submitEntry&&l.submitEntry(...e))},(0,a.v_)(i.isEditing?"Сохранить изменения":"Сохранить запись"),1),i.selectedEmotions.length>0?((0,o.uX)(),(0,o.CE)("div",S,[t[5]||(t[5]=(0,o.Lk)("h3",null,"Рекомендации:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.getRecommendations(),(e=>((0,o.uX)(),(0,o.CE)("li",{key:e},(0,a.v_)(e),1)))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",T,[(0,o.Lk)("h3",null,"Сохраненные записи: "+(0,a.v_)(i.entries.length),1),(0,o.Lk)("div",O,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.entries,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.date,class:"entry-item"},[(0,o.Lk)("strong",X,(0,a.v_)(e.date),1),(0,o.Lk)("div",x,[(0,o.Lk)("p",F,(0,a.v_)(e.description),1),(0,o.Lk)("p",U,[t[6]||(t[6]=(0,o.eW)("Эмоции: ")),(0,o.Lk)("span",j,(0,a.v_)(e.emotions.join(", ")),1)]),(0,o.Lk)("button",{class:"edit-button",onClick:t=>l.editEntry(e)},"Редактировать",8,A),(0,o.Lk)("button",{class:"delete-button",onClick:t=>l.deleteEntry(e)},"Удалить",8,I)])])))),128))])])])])}s(4114);let R=[];const q=e=>new Promise(((t,s)=>{try{R.push({...e,date:(new Date).toLocaleString()}),t()}catch(r){s(new Error("Ошибка при сохранении записи"))}})),D=()=>new Promise(((e,t)=>{try{e(R)}catch(s){t(new Error("Ошибка при загрузке записей"))}}));var J={name:"MoodEntry",data(){return{emotions:["Счастлив","Грустный","Волнующийся","Сердитый"],selectedEmotions:[],description:"",entries:[],isEditing:!1,editingEntry:null}},methods:{async submitEntry(){if(!this.description)return void alert("Описание не может быть пустым!");const e=/[a-zA-Z]/;if(e.test(this.description))return void alert("Недопустимые символы! Описание должно содержать только русские буквы.");const t={emotions:this.selectedEmotions,description:this.description,date:(new Date).toLocaleString()};try{if(this.isEditing){const e=this.entries.findIndex((e=>e.date===this.editingEntry.date));-1!==e&&(this.entries[e]=t),this.isEditing=!1,alert("Запись успешно обновлена")}else await q(t),this.entries.unshift(t),alert("Запись успешно сохранена");this.resetForm(),this.saveEntriesToLocalStorage(),this.resetForm(),this.saveEntriesToLocalStorage()}catch(s){console.error("Ошибка при сохранении записи:",s),alert("Произошла ошибка при сохранении записи. Попробуйте еще раз.")}},resetForm(){this.selectedEmotions=[],this.description="",this.editingEntry=null},async fetchEntries(){try{this.entries=await D();const e=JSON.parse(localStorage.getItem("moodEntries"))||[];this.entries=[...e,...this.entries],this.entries.sort(((e,t)=>new Date(t.date)-new Date(e.date)))}catch(e){console.error("Ошибка при загрузке записей:",e)}},saveEntriesToLocalStorage(){localStorage.setItem("moodEntries",JSON.stringify(this.entries))},editEntry(e){this.description=e.description,this.selectedEmotions=e.emotions,this.isEditing=!0,this.editingEntry=e},deleteEntry(e){const t=this.entries.findIndex((t=>t.date===e.date));-1!==t&&(this.entries.splice(t,1),this.saveEntriesToLocalStorage(),alert("Запись успешно удалена"))},getRecommendations(){const e=[];return this.selectedEmotions.includes("Счастлив")&&e.push("Продолжайте делать то, что приносит вам радость!"),this.selectedEmotions.includes("Грустный")&&e.push("Попробуйте заняться чем-то, что вас отвлечет, например, прогулкой или чтением книги."),this.selectedEmotions.includes("Волнующийся")&&e.push("Попробуйте медитацию или дыхательные упражнения для расслабления."),this.selectedEmotions.includes("Сердитый")&&e.push("Постарайтесь поговорить с кем-то о своих чувствах или заняться физической активностью."),e}},mounted(){this.fetchEntries()}};const N=(0,y.A)(J,[["render",V]]);var Q=N,H={name:"App",components:{UserRegistration:k,MoodEntry:Q}};const K=(0,y.A)(H,[["render",i]]);var W=K,z=s(2518);function Z(e,t,s,r,n,i){const a=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[t[1]||(t[1]=(0,o.Lk)("h1",null,"Главная страница",-1)),(0,o.Lk)("p",null,[(0,o.bF)(a,{to:"/auth"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Регистрация / Вход")]))),_:1})])])}var $={name:"HomePage"};const B=(0,y.A)($,[["render",Z]]);var G=B;function Y(e,t,s,r,n,i){return n.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,a.C4)(["notification",s.type]),onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e)),onMouseleave:t[1]||(t[1]=(...e)=>i.resetTimer&&i.resetTimer(...e))},(0,a.v_)(s.message),35)):(0,o.Q3)("",!0)}var ee={props:{message:{type:String,required:!0},type:{type:String,default:"info"},duration:{type:Number,default:3e3}},data(){return{visible:!0,timer:null}},methods:{close(){this.visible=!1,clearTimeout(this.timer)},resetTimer(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.close()}),this.duration)}},mounted(){this.resetTimer()},beforeUnmount(){clearTimeout(this.timer)}};const te=(0,y.A)(ee,[["render",Y],["__scopeId","data-v-4f9b49e9"]]);var se=te;const re=[{path:"/",name:"Home",component:G},{path:"/auth",name:"Auth",component:k},{path:"/notification",name:"AppNotification",component:se},{path:"/mood-entry",name:"MoodEntry",component:Q}],oe=(0,z.aE)({history:(0,z.LA)(),routes:re});var ne=oe;(0,r.Ef)(W).use(ne).mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,n){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],o=e[d][1],n=e[d][2];for(var a=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(a=!1,n<i&&(i=n));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,n,i=r[0],a=r[1],l=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(l)var d=l(s)}for(t&&t(r);c<i.length;c++)n=i[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},r=self["webpackChunkmy_new_project"]=self["webpackChunkmy_new_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[504],(function(){return s(7889)}));r=s.O(r)})();
//# sourceMappingURL=app.b5e277b7.js.map